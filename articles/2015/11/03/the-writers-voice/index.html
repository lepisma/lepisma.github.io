<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>
    The Writers' Voice &#8211; abhinav tushar
  </title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Comparing flow of writing styles with DTW.">
  <meta name="author" content="Abhinav Tushar">
  <meta name="keywords" content="articles">
  <link rel="canonical" href="https://lepisma.github.io//articles/2015/11/03/the-writers-voice/">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/assets/css/pace.css" type="text/css">
  <link rel="stylesheet" href="/assets/css/lightbox.css" type="text/css">
  <link rel="stylesheet" href="/assets/css/animate.min.css" type="text/css">
  <link rel="stylesheet" href="/css/blog.css" type="text/css">

  <!-- Favicon -->
  <link rel="apple-touch-icon-precomposed" sizes="57x57" href="/assets/images/favicons/apple-touch-icon-57x57.png" />
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/assets/images/favicons/apple-touch-icon-114x114.png" />
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/assets/images/favicons/apple-touch-icon-72x72.png" />
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/images/favicons/apple-touch-icon-144x144.png" />
  <link rel="apple-touch-icon-precomposed" sizes="60x60" href="/assets/images/favicons/apple-touch-icon-60x60.png" />
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="/assets/images/favicons/apple-touch-icon-120x120.png" />
  <link rel="apple-touch-icon-precomposed" sizes="76x76" href="/assets/images/favicons/apple-touch-icon-76x76.png" />
  <link rel="apple-touch-icon-precomposed" sizes="152x152" href="/assets/images/favicons/apple-touch-icon-152x152.png" />
  <link rel="icon" type="image/png" href="/assets/images/favicons/favicon-196x196.png" sizes="196x196" />
  <link rel="icon" type="image/png" href="/assets/images/favicons/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/png" href="/assets/images/favicons/favicon-32x32.png" sizes="32x32" />
  <link rel="icon" type="image/png" href="/assets/images/favicons/favicon-16x16.png" sizes="16x16" />
  <link rel="icon" type="image/png" href="/assets/images/favicons/favicon-128.png" sizes="128x128" />
  <meta name="application-name" content="&nbsp;"/>
  <meta name="msapplication-TileColor" content="#FFFFFF" />
  <meta name="msapplication-TileImage" content="/assets/images/favicons/mstile-144x144.png" />
  <meta name="msapplication-square70x70logo" content="/assets/images/favicons/mstile-70x70.png" />
  <meta name="msapplication-square150x150logo" content="/assets/images/favicons/mstile-150x150.png" />
  <meta name="msapplication-wide310x150logo" content="/assets/images/favicons/mstile-310x150.png" />
  <meta name="msapplication-square310x310logo" content="/assets/images/favicons/mstile-310x310.png" />

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Merriweather:900,900italic,300,300italic" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,800" rel="stylesheet" type="text/css">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono" rel="stylesheet">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script src="/assets/js/pace.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  <script src="/assets/js/lightbox.min.js"></script>
  <script src="/assets/js/jquery.lettering-0.6.1.min.js"></script>
  <script src="/assets/js/jquery.textillate.js"></script>
  <script src="/assets/js/custom.js"></script>

  <meta property="og:locale" content="en_US">
  <meta property="og:type" content="article">
  <meta property="og:title" content="The Writers' Voice">
  <meta property="og:description" content="Personal Blog">
  <meta property="og:url" content="https://lepisma.github.io//articles/2015/11/03/the-writers-voice/">
  <meta property="og:site_name" content="abhinav tushar">

  <meta name="twitter:url" content="https://lepisma.github.io//articles/2015/11/03/the-writers-voice/">
  <meta name="twitter:title" content="The Writers' Voice">
  <meta name="twitter:description" content="Personal Blog">

  <meta itemprop="name" content="The Writers' Voice">
  <meta itemprop="description" content="Personal Blog">
</head>

  <body>
    <div class="site-wrap">
      <header class="site-header px2 px-responsive">
  <div class="mt2 wrap">
    <div class="measure">
      <span class="site-title">
        <a href="/">
          <img src="/assets/images/avatar32.png">
        </a>
      </span>
      <nav class="site-nav right">
        <a href="/">home</a>
<a href="/feed.xml">feed</a>
<a href="/archive">archive</a>
<a href="/about/">about</a>

      </nav>
      <div class="clearfix"></div>
    </div>
  </div>
</header>


      <div class="post p2 p-responsive wrap" role="main">
        <div class="measure">
          


<div class="post-header mb2">
  <h1>The Writers' Voice</h1>
  <span class="post-meta small">Nov 3, 2015</span><br>
  <span class="post-meta small">4 minute read</span>
</div>

<article class="post-content">
  <script src="https://d3js.org/d3.v3.min.js"></script>

<style>
#scatter, #words {
  font-size: 12px;
}

.tooltip {
  position: absolute;
  width: 200px;
  height: 28px;
  pointer-events: none;
  font-size: 12px;
}

.footer {
  bottom: -16px;
  position: relative;
}

</style>

<p><span class="dropcap">I</span>f you are a fanatic reader of a particular author,
you can immediately identify whether a given (unknown) text is written by
him/her or not. Apart from the idiosyncrasies and diction, the flow and
development of text is particularly unique to an author. You can actually
visualize a curve of rising and falling emotional cues like <em>thrill</em>,
<em>optimism</em>, <em>confusion</em> in their works. Taking these works as signals can, in
principle, allow us to compare the writing styles. This post tries to do the
same using a technique called <em>dynamic time warping</em> on signals based on word
vectors gathered from classic literary works.</p>

<h2 id="text-to-signal">Text to Signal</h2>

<p>There are many ways to see text as a time series. I will use a pretty basic and
intuitive technique with word embeddings.</p>

<h4 id="word-embeddings">Word Embeddings</h4>

<p>Word embeddings provide projections of <strong>words</strong> from any language to some
\(N\) dimensional mathematical space. In simple terms, it provides a vector
for each word it has seen. The vector is learned in relation to the context in
which it appears. A popular method uses Continuous Bag of Words and Skip-gram
and has a python implementation in
<a href="https://radimrehurek.com/gensim/models/word2vec.html">gensim (Word2Vec)</a>.</p>

<p>An excellent primer on the topic is on the blog of Christopher Olah
<a href="http://colah.github.io/posts/2014-07-NLP-RNNs-Representations/">here</a>. This
vector representation does two things for us:</p>

<ol>
  <li><em>Gives us something much more amenable to mathematical analysis, numbers.</em></li>
  <li><em>Arranges the words in vector space according to the semantic meanings.</em></li>
</ol>

<p>A sample of \(1000\) words from a \(100\) dimensional word space (t-SNE<em>ed</em>
to 2 dimensions) after training on
<a href="https://www.gutenberg.org/">Project Gutenberg’s</a> \(1000\) ebooks is shown
below. Although the words look mostly archaic, lookout for nearby words with
semantic connections (hover on dots).</p>

<div id="words">
</div>

<h4 id="cramming-text">Cramming text</h4>

<p>After training an embedding model (with \(100\) dimensions) and computing
vectors for each word in a book, we are left with a matrix of size \(N_{w}
\times 100\), where \(N_{w}\) is the number of words. One simple reduction
strategy for \(N_{w}\) is to simply take sentence vectors by averaging out
the words (though, we could have used
<a href="https://radimrehurek.com/gensim/models/doc2vec.html">Doc2Vec</a> here, but lets go
with this). For \(100\) columns, we can hinge to few fixed word vectors like
<em>romance</em>, <em>mystery</em> and calculate cosine distances of the rows from these
anchor points. But, since the word space coverage might be severely affected, a
better way is to create anchor points in the number space directly.</p>

<p>A simple K-means clustering with \(4\) centers provide us the anchor points
and now the matrices are of size \(N_{s} \times 4\). Below is the graph for
<strong>The Sign of the Four</strong>  by Arthur Conan Doyle.</p>

<div>
    <a href="https://plot.ly/~lepisma/190/" target="_blank" title="Anchor point
    similarities" style="display: block; text-align: center;"><img src="https://plot.ly/~lepisma/190.png" alt="Anchor point similarities" style="max-width: 100%;width: 1099px;" width="1099" onerror="this.onerror=null;this.src='https://plot.ly/404.png';" /></a>
    <script data-plotly="lepisma:190" src="https://plot.ly/embed.js" async=""></script>
</div>

<p>The smooth lines are generated after using a gaussian filter and they more or
less capture the essence of the flow.</p>

<h2 id="comparing-signals">Comparing signals</h2>

<p>Once we have set of comparable signals for each book, next step is to do actual
comparison. A simple way would be to extract some sort of features from these
time series or directly apply techniques to learn from the series. But, lets try
something more crude and direct.</p>

<h4 id="dynamic-time-warping">Dynamic Time Warping</h4>

<blockquote>
<p>
In time series analysis, dynamic time warping (DTW) is an algorithm for
measuring similarity between two temporal sequences which may vary in time or
speed.
</p>
<footer>
<cite title="Wikipedia">
Wikipedia
</cite>
</footer>
</blockquote>

<p>In short this is what we want. DTW has simple working principles and is
invariant of length and positions of peaks and valleys in signals. The
<a href="https://en.wikipedia.org/wiki/Dynamic_time_warping#Implementation">pseudo code</a>
on Wikipedia should get you started.</p>

<h4 id="distances-to-coordinates">Distances to coordinates</h4>

<p>Once we get the distances, we get 2D cartesian coordinates using
<a href="https://en.wikipedia.org/wiki/Multidimensional_scaling">Multi Dimensional Scaling (MDS)</a>.
Although we won’t talk about this here, MDS is a cool thing to look for in data
visualization.</p>

<p>Anyways, here is the scatterplot of \(24\) classic books.</p>

<div id="scatter">
</div>

<p>Jane Austen gets a personal space of her own. Mark Twain looks versatile.</p>

<p>One thing that personally worries me while reading fiction is the easy
predictability, not of facts (which doesn’t hurt), but of what will happen next
in a global emotional context. Reading
<a href="https://www.goodreads.com/book/show/6411961-the-lost-symbol">The Lost Symbol</a>
made me feel like I am reading
<a href="https://www.goodreads.com/book/show/11125.Digital_Fortress">Digital Fortress</a>
all again. Hopefully, this won’t happen again.</p>

<script src="/scripts/posts/writing/scatter.js">
</script>

<script src="/scripts/posts/writing/words.js">
</script>


</article>

        </div>
      </div>
    </div>

    <footer class="footer">
</footer>

  </body>
</html>
